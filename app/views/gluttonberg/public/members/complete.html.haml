%h1
  Please complete your profile

#complete_profile
  = form_for @user, :url => profile_path, :method => :put do |f|
    - if @user.errors.any?
      #error
        %ul
          - @user.errors.full_messages.each do |msg|
            %li
              = msg

    - if current_user.email.blank?
      .form_element
        = f.label :email
        = f.text_field :email
    - else
      .form_element
        = f.label :email
        = f.text_field :email, :readonly => true
    
    .form_element
      = f.label :password
      = f.password_field :password
    
    .form_element
      = f.label :password_confirmation
      = f.password_field :password_confirmation
    
    
    .form_element
      = f.label :where_are_you_from
      = f.select :where_are_you_from , WHERE_ARE_YOU_FROM  , {:include_blank => true },  :id => "rego_state" , :class => "required" 

    #location_fields.have_fields
      .form_element
        = f.label "Where do you live?"
        = text_field_tag(:live, @live , {:class => "required postcode" })
        = label_tag "live_invalid_location" , "Please enter valid location." , :style => "display:none", :id => "live_invalid_location", :class => "error"
        = f.hidden_field(:live, {:class => " " })

      .form_element
        = f.label "Where do you work most?"
        = text_field_tag(:work, @work , {:class => "required postcode"})
        = label_tag "work_invalid_location" , "Please enter valid location." , :style => "display:none", :id => "work_invalid_location", :class => "error"
        = f.hidden_field(:work, {:class => " " })

      .form_element
        = f.label "Where do you play most?"
        = f.text_field(:play_location_list,  {:class => "required play_postcode"})
        = label_tag "play_invalid_location" , "Please enter valid location." , :style => "display:none", :id => "play_invalid_location" , :class => "error"
        
    
    .form_element.newsletter
      = f.label :newsletter
      = f.check_box :newsletter
    
    .form_element
      = f.submit
      = image_tag("/gluttonberg/images/spinner.gif" , :id => "user_submit_progress" , :style => "display:none" )

#form_hidden_field

:javascript
  $(document).ready(function() {
    init_rego_location();
    $("form#register_form").validate({
      rules: {
        "user[term_and_conditions]" : {
          required: true
        }

      },
      messages: {
        "user[first_name]": {
        required: "Enter your first name"
        },
        "user[email]": {
        required: "Enter your email address"
        },
        "user[password]": {
        required: "Enter a password"
        },
        "user[password_confirmation]": {
        required: "Enter the same password as above"
        },

        "user[term_and_conditions]" : {
          required: "Please accept our term and conditions"
        }  

      }  ,
          submitHandler: function(form) {
            $("#user_submit_progress").show();
             validateAllLocation("live" , form);
           }
    });



  });


